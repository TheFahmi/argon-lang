// Cryo GC Test (v2.28.0)
// Test garbage collection functionality

fn main() {
    print("=== Cryo Garbage Collector Test ===");
    print("");
    
    // Get initial stats
    let stats = gcStats();
    print("Initial heap size: " + toString(stats[0]));
    
    // Allocate some arrays
    print("");
    print("Allocating arrays...");
    let arr1 = [1, 2, 3, 4, 5];
    let arr2 = [10, 20, 30];
    let arr3 = ["hello", "world"];
    
    // Check stats after allocation
    let stats2 = gcStats();
    print("After allocation - heap: " + toString(stats2[0]) + ", allocated: " + toString(stats2[1]));
    
    // Force GC
    print("");
    print("Forcing garbage collection...");
    gcCollect();
    
    // Check stats after GC  
    let stats3 = gcStats();
    print("After GC - heap: " + toString(stats3[0]) + ", allocated: " + toString(stats3[1]));
    
    // The arrays are still reachable so they shouldn't be collected
    print("");
    print("Arrays still accessible:");
    print("  arr1 = " + toString(arr1));
    print("  arr2 = " + toString(arr2));
    print("  arr3 = " + toString(arr3));
    
    print("");
    print("=== GC Test Complete ===");
}
